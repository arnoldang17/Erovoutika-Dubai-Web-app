---
import { fetchPageContent } from "../db";
const data = await fetchPageContent("Home");
const newsContent = data.newsContent;
console.log(newsContent.NewsCard1);

const cards = [
    newsContent.NewsCard1,
    newsContent.NewsCard2,
    newsContent.NewsCard3,
    newsContent.NewsCard4,
];
---

<section class="bg-white p-5 md:px-16 lg:px-24">
    <div class="text-center mb-5">
        <h2 class="font-bold text-gray-800 text-[clamp(1.5rem,5vw,2.25rem)]">
            {newsContent.sectionTitle}
        </h2>
        <a
            href={newsContent.moreNewsLink.href}
            class="text-[clamp(1rem,2vw,1.125rem)] text-blue-600 hover:underline mt-2 inline-block"
        >
            {newsContent.moreNewsLink.text}
        </a>
    </div>

    <div class="mx-auto px-5 py-5">
        <div class="flex flex-wrap lg:flex-row justify-center gap-10">
            {
                cards.map((cardWrapper) => {
                    const key = Object.keys(cardWrapper)[0];
                    const card = cardWrapper;
                    return (
                        <a
                            href={card.link}
                            target="_blank"
                            class="w-[90vw] sm:w-[300px] md:w-[350px]"
                            key={key}
                        >
                            <div class="bg-white w-[400px] lg:w-full h-fit lg:h-full rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-shadow hover:scale-[1.02] duration-200 flex flex-col min-h-[400px] sm:min-h-[420px] md:min-h-[450px]">
                                <img
                                    src={card.image}
                                    alt={card.alt}
                                    class="w-full h-60 object-cover"
                                />
                                <div class="p-4 sm:p-5 md:p-6 flex flex-col flex-1">
                                    <p class="text-xs sm:text-sm md:text-base text-gray-500 mb-1">
                                        {card.date}
                                    </p>
                                    <h3 class="font-semibold text-gray-900 mb-4 text-sm sm:text-base md:text-lg">
                                        {card.title}
                                    </h3>
                                    <p class="text-sm sm:text-base md:text-[1rem] text-gray-700 flex-1">
                                        {card.description}
                                    </p>
                                </div>
                            </div>
                        </a>
                    );
                })
            }
        </div>
    </div>
</section>
